{{main-menu}}

<div class="ui basic segment">
  <div class="ui breadcrumb">
    {{#link-to 'pipelines' class="section"}}<h1>Pipelines</h1>{{/link-to}}
    <i class="right angle icon divider"></i>
    <div class="section"><h2>{{pipeline.name}}</h2></div>
    {{#if pipeline.builds.isFulfilled}}
      {{#if pipeline.builds.length}}
        <i class="right angle icon divider"></i>
        <div class="active section"><h2>{{model.number}}</h2></div>
      {{/if}}
    {{/if}}
  </div>

  <div class="ui right floated header">
    <a class="ui button" {{action "createBuild"}}>Create Build</a>
  </div>
</div>

{{#if pipeline.builds.isFulfilled}}
  {{#if pipeline.builds.length}}
    <div class="ui basic segment pipeline-build">
      <div class="left floated ui icon buttons">
        <button class="ui basic button" {{action "previousBuild"}}>
          <i class="left chevron icon"></i>
        </button>
        <button class="ui basic button" {{action "nextBuild"}}>
          <i class="right chevron icon"></i>
        </button>
      </div>
      <ul class="stages">
      {{#each model.stages as |stage|}}
        <li class="{{stage.status}} stage" {{action "selectStage" stage}}>
          <i class="legal icon"></i>
          <div class="label">{{stage.name}}</div>
        </li>
      {{/each}}
      </ul>
      {{#if selectedStage}}
        {{stage-details model=selectedStage build=model close=(action "unselectStage") }}
      {{/if}}
    </div>
  {{else}}
    No builds found.
  {{/if}}
{{/if}}
