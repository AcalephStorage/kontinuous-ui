<div class="two column row">
  <div class="left floated column">
    <div class="ui breadcrumb">
      {{#link-to 'pipelines' class="section"}}<h1>Pipelines</h1>{{/link-to}}
      <i class="right chevron icon divider"></i>
      <div class="section"><h4>{{pipeline.name}}</h4></div>
    </div>
  </div>
  <div class="right floated column">
    <div class="ui right floated nowrap teal button" {{action "confirmCreateBuild"}}>Create Build</div>
  </div>
</div>

<div class="sixteen wide column pipeline-build">
  {{#if pipeline.builds.isFulfilled}}
    {{#if pipeline.builds.length}}
      <h3>Build {{model.number}}</h3>
      <a {{action "previousBuild"}}><i class="tiny left chevron icon"></i><small>Prev</small></a>
      <a {{action "nextBuild"}}><small>Next</small><i class="tiny right chevron icon"></i></a>
      <ul class="stages">
      {{#each model.stages as |stage|}}
        <li class="{{stage.status}} stage" {{action "selectStage" stage}}>
          <i class="legal icon"></i>
          <div class="label">{{stage.name}}</div>
        </li>
      {{/each}}
      </ul>

      {{#if selectedStage}}
        {{stage-details model=selectedStage build=model close=(action "unselectStage") }}
      {{/if}}

    {{else}}
      No builds found.
    {{/if}}
  {{/if}}
</div>

{{#ui-modal name="create-build-confirmation" class="small create-build-confirmation" closable=false onApprove=(action "createBuild") }}
  <div class="header">Create Build</div>
  <div class="content">Are you sure you want to create a build for {{pipeline.name}}?</div>
  <div class="actions">
    <div class="ui negative small button">No</div>
    <div class="ui positive right labeled icon small button">Yes<i class="checkmark icon"></i></div>
  </div>
{{/ui-modal}}
